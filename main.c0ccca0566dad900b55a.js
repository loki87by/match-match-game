(()=>{"use strict";class t{constructor(t,e,s){this.child=document.createElement(`${e}`),s.class&&(this.child.className=s.class),s.text&&(this.child.textContent=s.text),s.id&&(this.child.id=s.id),s.src&&(this.child.src=s.src),s.alt&&(this.child.alt=s.alt),s.href&&(this.child.href=s.href),s.target&&(this.child.target=s.target),s.for&&(this.child.htmlFor=s.for),s.type&&(this.child.type=s.type),s.value&&(this.child.value=s.value),s.placeholder&&(this.child.placeholder=s.placeholder),s.required&&(this.child.required=s.required),s.accept&&(this.child.accept=s.accept),s.pattern&&(this.child.pattern=s.pattern),s.max&&(this.child.maxLength=s.max),s.disabled&&(this.child.disabled=s.disabled),s.selected&&(this.child.selected=s.selected),t.appendChild(this.child)}}function e(e,s){s&&s.forEach((s=>{const i=Object.keys(s)[0];return new t(e,i,Object.values(s)[0])}))}function s(t,i){if(i)for(let a=0;a<t.length;a+=1){const n=i[a],r=t[a].nodeName.toLowerCase();n[r].children&&(e(t[a],n[r].children),s(t[a].children,n[r].children))}}const i=(t,e,s,i)=>{const a=document.createElement(t);return i&&(a.textContent=i),Object.entries(e).forEach((t=>{a.setAttribute(String(t[0]),String(t[1]))})),s&&s.appendChild(a),a};function a(t){const e=document.createElement("h1"),s=String(t.target.errorCode).concat(". Sorry, please retry later.");e.textContent=s,e.classList.add("unknown-db-error"),setTimeout((()=>{e.remove()}),5e3)}function n(t,e){t[e].classList.remove("main__game-card_failure"),t[e].classList.add("main__game-card_hidden")}const r=t=>{let e="";return e=t<10?`0${String(t)}`:String(t),e};const o={content:[{div:{children:[{h2:{class:"main__game-timer",text:"00:00"}},{div:{class:"main__game-cards-container"}}],class:"main__container main__container_game"}}],id:"game"};class c{constructor(t,e){this.showInputError=(t,e,s,i)=>{const a=t.querySelector(`#${e.id}-error`);e.parentElement?.classList.add(this.inputErrorClass),s.src="../src/assets/icons/abort.png",a.textContent=i,a?.classList.add(this.errorClass)},this.hideInputError=(t,e,s)=>{const i=t.querySelector(`#${e.id}-error`);e.parentElement?.classList.remove(this.inputErrorClass),s.src="../src/assets/icons/checked.svg",i?.classList.remove(this.errorClass),i.textContent=""},this.checkInputValidity=(t,e,s)=>{e.validity.valid?this.hideInputError(t,e,s):this.showInputError(t,e,s,e.validationMessage)},this.hasInvalidInput=t=>t.some((t=>!t.validity.valid)),this.toggleButtonState=(t,e)=>{this.hasInvalidInput(t)?(e.classList.add(this.inactiveButtonClass),e.setAttribute("disabled","true")):(e.classList.remove(this.inactiveButtonClass),e.removeAttribute("disabled"))},this.setEventListeners=t=>{const e=Array.from(t.querySelectorAll(this.inputSelector)),s=Array.from(t.querySelectorAll(this.imageSelector)),i=t.querySelector(this.submitButtonSelector);this.toggleButtonState(e,i),e.forEach(((a,n)=>{a.addEventListener("input",(()=>{this.toggleButtonState(e,i),this.checkInputValidity(t,a,s[n])}))}))},this.enableValidation=()=>{this.setEventListeners(this.element)},this.inputSelector=t.inputSelector,this.submitButtonSelector=t.submitButtonSelector,this.inactiveButtonClass=t.inactiveButtonClass,this.inputErrorClass=t.inputErrorClass,this.errorClass=t.errorClass,this.imageSelector=t.imageSelector,this.element=e}}const l=[{header:{children:[{div:{children:[{div:{children:[{p:{class:"header__logo-text",text:"match"}},{p:{class:"header__logo-text header__logo-text_inverse",text:"match"}}],class:"header__logo"}},{nav:{children:[{div:{children:[{img:{class:"header__navigation-img",alt:"about game",src:"../src/assets/icons/quest.png"}},{p:{class:"header__navigation-text",text:"about game"}}],class:"header__navigation-item header__navigation-item_active",id:"/"}},{div:{children:[{img:{class:"header__navigation-img",alt:"scores",src:"../src/assets/icons/nav-star.svg"}},{p:{class:"header__navigation-text",text:"best score"}}],class:"header__navigation-item",id:"page1"}},{div:{children:[{img:{class:"header__navigation-img",alt:"settings",src:"../src/assets/icons/nav-sett.png"}},{p:{class:"header__navigation-text",text:"game settings"}}],class:"header__navigation-item",id:"page2"}}],class:"header__navigation"}}],class:"header__main-block"}},{div:{children:[{button:{class:"header__user-block-btn",text:"register new player",id:"register-btn",type:"button"}},{img:{class:"header__user-block-img header__user-block-img_unauthorized",alt:"avatar",src:"../src/assets/icons/avatar.png",id:"user-avatar"}}],class:"header__user-block"}}]}},{main:{}},{footer:{children:[{p:{class:"footer__copirights",text:"© Алексей Акулич"}},{a:{children:[{img:{class:"footer__img",alt:"author github",src:"../src/assets/icons/github.svg"}}],class:"footer__link",target:"_blank",href:"https://github.com/loki87by"}},{date:{class:"footer__date",text:"2021"}}]}},{div:{children:[{div:{children:[{h2:{text:"Registr new Player"}},{form:{children:[{ul:{children:[{li:{children:[{input:{class:"popup__form-list-input",value:"",id:"form-name",placeholder:"First Name",type:"text",required:"true",pattern:"^(?=.*[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ])[0-9 A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]+$",max:"30"}},{label:{class:"popup__form-list-label",text:"First Name",for:"form-name"}},{img:{class:"popup__form-list-img",alt:"confirm input",src:"../src/assets/icons/checked.svg"}},{span:{class:"",text:"",id:"form-name-error"}}],class:"popup__form-list-item"}},{li:{children:[{input:{class:"popup__form-list-input",value:"",id:"form-last-name",placeholder:"Last Name",type:"text",required:"true",pattern:"^(?=.*[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ])[0-9 A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]+$",max:"30"}},{label:{class:"popup__form-list-label",text:"Last Name",for:"form-last-name"}},{img:{class:"popup__form-list-img",alt:"confirm input",src:"../src/assets/icons/checked.svg"}},{span:{class:"",text:"",id:"form-last-name-error"}}],class:"popup__form-list-item"}},{li:{children:[{input:{class:"popup__form-list-input",value:"",id:"form-email",placeholder:"E-mail",type:"email",required:"true",max:"30"}},{label:{class:"popup__form-list-label",text:"E-mail",for:"form-email"}},{img:{class:"popup__form-list-img",alt:"confirm input",src:"../src/assets/icons/checked.svg"}},{span:{class:"",text:"",id:"form-email-error"}}],class:"popup__form-list-item"}}],class:"popup__form-list"}},{div:{children:[{img:{class:"popup__form-avatar-img",alt:"your avatar",src:"../src/assets/icons/avatar.png",id:"popup-avatar"}},{input:{class:"popup__form-list-file",id:"form-file",type:"file",accept:"image/*"}}],class:"popup__form-avatar"}},{button:{class:"popup__form-btn",text:"Add user",id:"form-submit",type:"button"}},{button:{class:"popup__form-btn popup__form-btn_reverse",text:"cancel",id:"form-reset",type:"button"}}],class:"popup__form"}}],class:"popup__container"}}],class:"popup",id:"popup"}}],d={formSelector:".popup__form",inputSelector:".popup__form-list-input",imageSelector:".popup__form-list-img",submitButtonSelector:".popup__form-btn",inactiveButtonClass:"popup__form-btn_error",inputErrorClass:"popup__form-list-input_error",errorClass:"popup__form-list-error"},u=[{path:"/",component:{content:[{div:{children:[{h2:{class:"main__title",text:"How to play?"}},{ul:{children:[{li:{children:[{div:{children:[{h3:{text:"1",class:"main__about-rule-counter"}},{h4:{text:"Register new player in game",class:"main__about-rule-title"}}],class:"main__about-rule-description"}},{img:{alt:"example popup",src:"../src/assets/images/popup.jpg",class:"main__about-rule-image_popup"}}],class:"main__about-rule"}},{li:{children:[{div:{children:[{h3:{text:"2",class:"main__about-rule-counter"}},{h4:{text:"Configure your game settings",class:"main__about-rule-title"}}],class:"main__about-rule-description"}},{img:{alt:"example settings",src:"../src/assets/images/set-button.jpg",class:"main__about-rule-image_settings"}}],class:"main__about-rule"}},{li:{children:[{div:{children:[{h3:{text:"3",class:"main__about-rule-counter"}},{h4:{text:"Start you new game! Remember card positions and match it before times up.",class:"main__about-rule-title"}}],class:"main__about-rule-description"}},{img:{alt:"example game",src:"../src/assets/images/game.jpg",class:"main__about-rule-image_game"}}],class:"main__about-rule"}}],class:"main__content"}}],class:"main__container main__container_about"}}],id:"main"}},{path:"page1",component:{content:[{div:{children:[{h2:{class:"main__title",text:"Best players"}},{ul:{children:[],class:"main__content"}}],class:"main__container main__container_score"}}],id:"score"}},{path:"page2",component:{content:[{div:{children:[{div:{children:[{h2:{class:"main__title",text:"Game cards"}},{select:{children:[{option:{disabled:"true",text:"select game cards type",selected:"true"}},{option:{value:"animals",text:"Animals"}},{option:{value:"animations",text:"Toons"}},{option:{value:"auto",text:"Cars"}},{option:{value:"comics",text:"Marvel cinema"}},{option:{value:"moto",text:"Motorcycles"}}],class:"main__settings-select",id:"cards-type"}}],class:"main__settings-element"}},{div:{children:[{h2:{class:"main__title",text:"Difficulty"}},{select:{children:[{option:{disabled:"true",text:"select game type",selected:"true"}},{option:{value:"16",text:"4*4"}},{option:{value:"20",text:"5*4"}},{option:{value:"24",text:"6*4"}},{option:{value:"30",text:"6*5"}},{option:{value:"36",text:"6*6"}},{option:{value:"42",text:"6*7"}},{option:{value:"48",text:"6*8"}},{option:{value:"56",text:"7*8"}},{option:{value:"64",text:"8*8"}}],class:"main__settings-select",id:"difficulty"}}],class:"main__settings-element"}}],class:"main__container main__container_settings"}}],id:"settings"}},{path:"page3",component:o}],m={content:[{div:{children:[{h1:{class:"not-found__title",text:"404"}},{h2:{text:"page not found"}}],class:"not-found"}}],id:"error"},h=new class{constructor(){this.initial=()=>{const t=indexedDB.open("loki87by",1);t.onsuccess=t=>{this.db=t.target.result},t.onupgradeneeded=t=>{this.db=t.target.result,this.db.createObjectStore("users",{keyPath:"email",autoIncrement:!0})},t.onsuccess=t=>{this.db=t.target.result},t.onerror=t=>{a(t)}},this.addUser=(t,e)=>{const s=this.db.transaction(["users"],"readwrite");s.objectStore("users").put(t),s.oncomplete=()=>{e()},s.onerror=t=>{a(t)}},this.getAndDisplayScores=()=>{const t=this.db.transaction(["users"],"readonly").objectStore("users").getAll(),e=[];t.onsuccess=t=>{const s=t.target.result;s.sort(((t,e)=>(t.score||0)<(e.score||0)?1:-1));for(let t=0;t<10;t+=1)e.push(s[t]);!function(t){const e=document.querySelector(".main__content");t.forEach((t=>{!function(t,e){const s=i("li",{class:"main__score-item"},t),a=i("div",{class:"main__score-user"},s),n=i("div",{class:"main__score-score-info"},s);i("img",{class:"main__score-avatar",src:e.avatar||"../src/assets/icons/avatar.png",alt:"avatar"},a),i("h3",{class:"main__score-name"},a,`${e.name} ${e.last}`),i("h4",{class:"main__score-email"},a,`${e.email}`),i("h3",{class:"main__score-score-text"},n,"Score:  "),i("h3",{class:"main__score-score-count"},n,`${e.score}`)}(e,t)}))}(e)},t.onerror=t=>{a(t)}},this.score=NaN,this.cursorKey=NaN,this.db=""}getNote(t){const e=this.db.transaction(["users"],"readwrite").objectStore("users").get(t.email);e.onsuccess=t=>(this.score=t.target.result.score,this.score),e.onerror=t=>{a(t)}}updateScore(t){const e=this.db.transaction(["users"],"readwrite");e.objectStore("users").put(t),e.onerror=t=>{a(t)}}};class p{constructor(t,e,s){this.shuffle=t=>{const e=t.slice();for(let t=e.length-1;t>0;t-=1){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},this.startTimer=()=>{const t=document.querySelector(".main__game-timer");"stop game"===this.button.textContent&&setTimeout((()=>(this.time+=1,function(t,e){let s=0,i=0;t>59?(s=Math.floor(t/60),i=t%60):i=t,function(t,e,s){let i;i=t>60?`${r(Math.floor(t/60))}:${r(Math.floor(t%60))}`:r(t);const a=r(e);s.textContent=`${i}:${a}`}(s,i,e)}(this.time,t),this.startTimer())),1e3)},this.front=e,this.difficulty=t,this.cards=[],this.selectionIndex=NaN,this.success=0,this.failure=0,this.time=0,this.user=s,this.score=0,this.button=document.getElementById("register-btn")}preload(){this.cards=[];for(let t=0;t<this.difficulty;t+=2)this.cards[t]={front:`../src/assets/images/${this.front}/${t/2+1}.jpg`},this.cards[t+1]={front:`../src/assets/images/${this.front}/${t/2+1}.jpg`};return this.shuffle(this.cards),this.shuffle(this.cards)}stopTimer(){const t=50*this.difficulty;t>10*(this.time+1)?this.score=t-10*(this.time+1):this.score=0,this.user.score=this.score,h.getNote(this.user),setTimeout((()=>{h.score<this.score&&h.updateScore(this.user)}),100),function(t){const e=document.querySelector("main"),s=i("div",{class:"popup popup_opened popup_congratulations"},e),a=i("div",{class:"popup__container"},s);i("h3",{class:"popup__text"},a,`Congratulations! You won with ${t.success+t.failure} attempts in ${t.time} seconds and scored ${t.score} points. To try again, click "One more", or click "ok" to be redirected to the page of records.`),i("a",{href:"#page1",class:"popup__link"},a,"ok")}({success:this.success,failure:this.failure,time:this.time+1,score:this.score})}checkCoincidence(t,e){const s=document.querySelector(".main__game-cards-container");let i=NaN;Array.from(s.children).forEach(((e,s)=>{e===t.target&&(i=s)}));const a=[];!this.selectedCard&&t.target.classList.contains("main__game-card_hidden")?(this.selectedCard=e[i],this.selectionIndex=i,s.children[this.selectionIndex].classList.remove("main__game-card_hidden")):!this.currentCard&&t.target.classList.contains("main__game-card_hidden")&&(this.currentCard=e[i],s.children[i].classList.remove("main__game-card_hidden"),setTimeout((()=>{this.selectedCard?.front===this.currentCard?.front?(s.children[this.selectionIndex].classList.add("main__game-card_success"),s.children[i].classList.add("main__game-card_success"),this.success+=1,this.success===this.difficulty/2&&(this.button.textContent="one more",this.stopTimer())):(a.push(this.selectionIndex,i),s.children[this.selectionIndex].classList.add("main__game-card_failure"),s.children[i].classList.add("main__game-card_failure"),this.failure+=1),this.selectedCard=void 0,this.currentCard=void 0,this.selectionIndex=NaN}),100),setTimeout((()=>{0!==a.length&&(n(s.children,a[0]),n(s.children,a[1]))}),800))}load(){const t=this.preload(),e=document.querySelector(".main__game-cards-container");this.difficulty>16&&function(t,e){const s=Math.floor(Math.sqrt(t)),i=`repeat(${t/s}, 1fr)`,a=`repeat(${s}, 1fr)`;e.setAttribute("style",`grid-template-columns: ${i}; grid-template-rows: ${a}`)}(this.difficulty,e),t.forEach((t=>{!function(t,e,s){const a={class:"main__game-card",src:`${t.front}`,alt:`some ${e}`};i("img",a,s)}(t,this.front,e)})),setTimeout((()=>{const s=document.querySelectorAll(".main__game-card");Array.from(s).forEach((t=>{t.classList.add("main__game-card_hidden")})),e.addEventListener("click",(e=>{this.checkCoincidence(e,t)})),this.startTimer()}),3e4)}}const _=document.body;e(_,l),s(_.children,l);const g={};let f;g.score=0;const v=document.getElementById("register-btn"),b=document.getElementById("popup"),y=document.getElementById("form-reset"),x=document.querySelectorAll("input"),L=document.forms[0],E=document.getElementById("form-file"),S=document.getElementById("form-submit"),w=document.getElementById("user-avatar"),C=document.querySelector("main"),k=document.querySelectorAll(".header__navigation-item");let I,$,q="animals",A=!1,B="none";function N(){b?.classList.add("popup_opened"),new c(d,L).enableValidation()}function T(){for(let t=0;t<x.length;t+=1)x[t].value="";b?.classList.remove("popup_opened")}function j(t,e){f=new p(t,e,g),$=f,$.load()}function M(){T(),A=!0,v.textContent="start game",w.src=g.avatar||"../src/assets/icons/avatar.png",w.classList.remove("header__user-block-img_unauthorized")}h.initial();class F{constructor(t,e){this.container=t,this.currentPage=e,this.difficulty=16,this.type="animals",this.nav=document.querySelector("nav"),this.route=this.route.bind(this)}initApp(){C.innerHTML="",this.render(this.currentPage),this.nav?.addEventListener("click",this.route)}mainFuncs(){const t=document.querySelector(".main__about-rule-image_popup"),e=document.querySelector(".main__about-rule-image_settings"),s=document.querySelector(".main__about-rule-image_game");A?s?.classList.add("main__about-rule-image_game-enabled"):s?.classList.remove("main__about-rule-image_game_enabled"),e?.addEventListener("click",(()=>{this.route(k[2])})),t?.addEventListener("click",(()=>{N()})),s?.addEventListener("click",(()=>{A&&(j(I||16,q),window.location.hash="page3")}))}settingsFuncs(){const t=document.getElementById("difficulty");t.addEventListener("change",(()=>{this.difficulty=+t.value,I=this.difficulty}));const e=document.getElementById("cards-type");e.addEventListener("change",(()=>{this.type=e.value,q=this.type}))}render(t){const i=t?.content||this.currentPage;e(this.container,i),s(this.container.children,i),"main"===t?.id&&this.mainFuncs(),"settings"===t?.id&&this.settingsFuncs(),"score"===t?.id&&h.getAndDisplayScores(),"game"===t?.id&&(j(I||16,q),window.location.hash="page3")}route(t){const e=this.nav?.querySelector(".header__navigation-item_active");let s;s=t.target?t.target:t,e?.classList.remove("header__navigation-item_active"),s.classList.add("header__navigation-item_active");const i=s.id||s.parentNode.id;window.location.hash!==i&&(window.location.hash=i)}}function R(){C.innerHTML="",new F(C,o).initApp()}const z=()=>{const t=window.location.hash.slice(1).toLowerCase()||"/",{component:e=m}=((t,e)=>e.find((e=>e.path.match(new RegExp(`^\\${t}$`,"gm"))))||void 0)(t,u)||{};C.innerHTML="",new F(C,e).initApp(),document.querySelector(".header__navigation-item_active")?.classList.remove("header__navigation-item_active"),document.getElementById(`${t}`)?.classList.add("header__navigation-item_active")};window.addEventListener("hashchange",z),window.addEventListener("load",z),v.addEventListener("click",(function(){A?("#page3"!==window.location.hash&&(window.location.hash="#page3",B="none",R()),"one more"===v.textContent&&(B="none",R(),v.textContent="stop game"),"none"===B?(R(),B="started",v.textContent="stop game"):"started"===B?(B="paused",v.textContent="continue game"):($.startTimer(),B="started",v.textContent="stop game")):N()})),y?.addEventListener("click",T),E.addEventListener("change",(function(){const t=this.files[0],e=document.getElementById("popup-avatar");let s;const i=new Image;i.src=window.URL.createObjectURL(t),i.onload=()=>{const t=Math.min(i.width,i.height),a=document.createElement("canvas");a.width=t,a.height=t;const n=a.getContext("2d");n?.drawImage(i,0,0,t,t),s=n?.canvas.toDataURL("image.png"),e.src=s,g.avatar=s}})),_.addEventListener("click",(t=>{t.target.classList.contains("popup_opened")&&T()})),window.addEventListener("keyup",(t=>{"Escape"===t.key&&T()})),S.addEventListener("click",(()=>{const t=Date.now();g.name=x[0].value,g.last=x[1].value,g.email=x[2].value,g.timestamp=t,h.addUser(g,M)}))})();